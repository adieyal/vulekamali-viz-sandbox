<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
        <title>D3 Horizonal Bar Chart</title>
        <link rel="stylesheet" href="horizontal-bar-chart.css">
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="horizontal-bar-chart.js"></script>
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.min.js"
			  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
			  crossorigin="anonymous"></script>-->
        <style>
            html, body{
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
            }
            #chart{
                position: relative;
                margin: 50px auto;
                width: 40%;
                height: auto;
                font-family:'Courier New', Courier, monospace;
            }
        </style>
    </head>
    <body>
       <div id="chart"></div>
       <script>


             /*[
                { country: "Italy", city: "Milano", name: "Option E", value: 1560000000, more_url:"https://municipalmoney.gov.za/profiles/municipality-NMA"},
                { country: "Italy", city: "Rome", name: "Option A", value: 1070000000},
                { country: "United States", city: "New York", name: "Option B", value: 3100000000},
                { country: "United States", city: "Washington", name: "Option C", value: 6350000000},
             { country: "Italy", city: "Milano", name: "Option D", value: 2380000000 }

           ];*/
           /*
            width: 500,
            marginLeft: 100,
            barHeight: 20,
            barSpace: 5,
            groupSpace: 30,
            ticks: 5,
            filterKey: undefined,
            groupKey: undefined,
            nameKey: undefined,
            valuekey: undefined,
            urlkey: undefined,
            filterLabel: "Choose a Filter Item:",
            fontFace: 'auto',
            fontSize: 12
            minValue: 0,
            maxValue: 100,  // default = max(data)
            barUnit: undefined, // 'K' 'M', 'B'
            xAxisUnit: undefined, // 'K' 'M', 'B'
            colors:undefined // example: ['#111','#222','#333']
          */
           /*
           new HorizonalBarChart("chart", data, {
               filterLabel:"Choose a Country :",
               filterKey:"country",
               groupKey: "city",
               nameKey: "name",
               valueKey: "value",
               urlKey: "more_url",
               minValue: 0,
               maxValue: 10000000000,
               barUnit: 'M',
               xAxisUnit: 'B',
               colors:['green', 'red']
           });
           */

         //  $.get("https://data.vulekamali.gov.za/api/3/action/datastore_search_sql?sql=SELECT * from \"d84ba249-0a55-40b0-a2d1-a968a55ac452\" WHERE sphere = 'local'")
         //.done(function(data) {
         var data = [{"geo_code": "BUF", "parent_name": "Eastern Cape", "_full_text": "'911042':5 'buf':8 'buffalo':2 'cape':7 'city':3 'eastern':6 'local':4 'metro':1", "amount_rand_thousand": "911042", "sphere": "local", "municipality_type": "metro", "_id": 11, "geo_name": "Buffalo City"}, {"geo_code": "NMA", "parent_name": "Eastern Cape", "_full_text": "'1106936':1 'bay':9 'cape':4 'eastern':3 'local':6 'mandela':8 'metro':2 'nelson':7 'nma':5", "amount_rand_thousand": "1106936", "sphere": "local", "municipality_type": "metro", "_id": 12, "geo_name": "Nelson Mandela Bay"}, {"geo_code": "EC101", "parent_name": "Eastern Cape", "_full_text": "'96607':6 'beyers':2 'cape':5 'dr':1 'eastern':4 'ec101':8 'local':7 'naude':3", "amount_rand_thousand": "96607", "sphere": "local", "municipality_type": "local", "_id": 13, "geo_name": "Dr Beyers Naude"}, {"geo_code": "EC102", "parent_name": "Eastern Cape", "_full_text": "'56696':8 'blue':1 'cape':5 'crane':2 'eastern':4 'ec102':6 'local':7 'route':3", "amount_rand_thousand": "56696", "sphere": "local", "municipality_type": "local", "_id": 14, "geo_name": "Blue Crane Route"}, {"geo_code": "EC104", "parent_name": "Eastern Cape", "_full_text": "'99851':1 'cape':3 'eastern':2 'ec104':4 'local':5 'makana':6", "amount_rand_thousand": "99851", "sphere": "local", "municipality_type": "local", "_id": 15, "geo_name": "Makana"}, {"geo_code": "EC105", "parent_name": "Eastern Cape", "_full_text": "'103801':6 'cape':3 'eastern':2 'ec105':5 'local':4 'ndlambe':1", "amount_rand_thousand": "103801", "sphere": "local", "municipality_type": "local", "_id": 16, "geo_name": "Ndlambe"}, {"geo_code": "EC106", "parent_name": "Eastern Cape", "_full_text": "'86469':1 'cape':3 'eastern':2 'ec106':8 'local':4 'river':6 'sundays':5 'valley':7", "amount_rand_thousand": "86469", "sphere": "local", "municipality_type": "local", "_id": 17, "geo_name": "Sundays River Valley"}, {"geo_code": "EC108", "parent_name": "Eastern Cape", "_full_text": "'136649':6 'cape':3 'eastern':2 'ec108':1 'kouga':4 'local':5", "amount_rand_thousand": "136649", "sphere": "local", "municipality_type": "local", "_id": 18, "geo_name": "Kouga"}, {"geo_code": "EC109", "parent_name": "Eastern Cape", "_full_text": "'52718':4 'cape':2 'eastern':1 'ec109':8 'kamma':7 'kou':6 'kou-kamma':5 'local':3", "amount_rand_thousand": "52718", "sphere": "local", "municipality_type": "local", "_id": 19, "geo_name": "Kou-Kamma"}, {"geo_code": "DC10", "parent_name": "Eastern Cape", "_full_text": "'97175':9 'baartman':4 'cape':8 'dc10':1 'district':2,5 'eastern':7 'local':10 'municipality':6 'sarah':3", "amount_rand_thousand": "97175", "sphere": "local", "municipality_type": "district", "_id": 20, "geo_name": "Sarah Baartman District Municipality"}, {"geo_code": "EC121", "parent_name": "Eastern Cape", "_full_text": "'263748':3 'cape':2 'eastern':1 'ec121':4 'local':5 'mbhashe':6", "amount_rand_thousand": "263748", "sphere": "local", "municipality_type": "local", "_id": 21, "geo_name": "Mbhashe"}, {"geo_code": "EC122", "parent_name": "Eastern Cape", "_full_text": "'273742':6 'cape':3 'eastern':2 'ec122':1 'local':5 'mnquma':4", "amount_rand_thousand": "273742", "sphere": "local", "municipality_type": "local", "_id": 22, "geo_name": "Mnquma"}, {"geo_code": "EC123", "parent_name": "Eastern Cape", "_full_text": "'45063':1 'cape':3 'eastern':2 'ec123':7 'great':4 'kei':5 'local':6", "amount_rand_thousand": "45063", "sphere": "local", "municipality_type": "local", "_id": 23, "geo_name": "Great Kei"}, {"geo_code": "EC124", "parent_name": "Eastern Cape", "_full_text": "'111895':6 'amahlathi':1 'cape':3 'eastern':2 'ec124':5 'local':4", "amount_rand_thousand": "111895", "sphere": "local", "municipality_type": "local", "_id": 24, "geo_name": "Amahlathi"}, {"geo_code": "EC126", "parent_name": "Eastern Cape", "_full_text": "'87420':6 'cape':3 'eastern':2 'ec126':1 'local':5 'ngqushwa':4", "amount_rand_thousand": "87420", "sphere": "local", "municipality_type": "local", "_id": 25, "geo_name": "Ngqushwa"}, {"geo_code": "EC129", "parent_name": "Eastern Cape", "_full_text": "'184086':1 'cape':3 'eastern':2 'ec129':4 'local':5 'mhlaba':7 'raymond':6", "amount_rand_thousand": "184086", "sphere": "local", "municipality_type": "local", "_id": 26, "geo_name": "Raymond Mhlaba"}, {"geo_code": "DC12", "parent_name": "Eastern Cape", "_full_text": "'896469':3 'amathole':4 'cape':8 'dc12':1 'district':2,5 'eastern':7 'local':9 'municipality':6", "amount_rand_thousand": "896469", "sphere": "local", "municipality_type": "district", "_id": 27, "geo_name": "Amathole District Municipality"}, {"geo_code": "EC131", "parent_name": "Eastern Cape", "_full_text": "'45400':4 'cape':3 'eastern':2 'ec131':1 'inxuba':6 'local':5 'yethemba':7", "amount_rand_thousand": "45400", "sphere": "local", "municipality_type": "local", "_id": 28, "geo_name": "Inxuba Yethemba"}, {"geo_code": "EC135", "parent_name": "Eastern Cape", "_full_text": "'168126':3 'cape':2 'eastern':1 'ec135':7 'intsika':5 'local':4 'yethu':6", "amount_rand_thousand": "168126", "sphere": "local", "municipality_type": "local", "_id": 29, "geo_name": "Intsika Yethu"}, {"geo_code": "EC136", "parent_name": "Eastern Cape", "_full_text": "'130818':5 'cape':2 'eastern':1 'ec136':6 'emalahleni':3 'local':4", "amount_rand_thousand": "130818", "sphere": "local", "municipality_type": "local", "_id": 30, "geo_name": "Emalahleni "}, {"geo_code": "EC137", "parent_name": "Eastern Cape", "_full_text": "'156738':1 'cape':3 'eastern':2 'ec137':6 'engcobo':4 'local':5", "amount_rand_thousand": "156738", "sphere": "local", "municipality_type": "local", "_id": 31, "geo_name": "Engcobo"}, {"geo_code": "EC138", "parent_name": "Eastern Cape", "_full_text": "'71988':1 'cape':3 'eastern':2 'ec138':6 'local':5 'sakhisizwe':4", "amount_rand_thousand": "71988", "sphere": "local", "municipality_type": "local", "_id": 32, "geo_name": "Sakhisizwe"}, {"geo_code": "EC139", "parent_name": "Eastern Cape", "_full_text": "'191323':7 'cape':3 'eastern':2 'ec139':1 'enoch':4 'local':6 'mgijima':5", "amount_rand_thousand": "191323", "sphere": "local", "municipality_type": "local", "_id": 33, "geo_name": "Enoch Mgijima"}, {"geo_code": "DC13", "parent_name": "Eastern Cape", "_full_text": "'581707':9 'cape':8 'chris':3 'dc13':1 'district':2,5 'eastern':7 'hani':4 'local':10 'municipality':6", "amount_rand_thousand": "581707", "sphere": "local", "municipality_type": "district", "_id": 34, "geo_name": "Chris Hani District Municipality"}, {"geo_code": "EC141", "parent_name": "Eastern Cape", "_full_text": "'161277':6 'cape':3 'eastern':2 'ec141':5 'elundini':1 'local':4", "amount_rand_thousand": "161277", "sphere": "local", "municipality_type": "local", "_id": 35, "geo_name": "Elundini"}, {"geo_code": "EC142", "parent_name": "Eastern Cape", "_full_text": "'158517':6 'cape':2 'eastern':1 'ec142':5 'local':3 'senqu':4", "amount_rand_thousand": "158517", "sphere": "local", "municipality_type": "local", "_id": 36, "geo_name": "Senqu"}, {"geo_code": "EC145", "parent_name": "Eastern Cape", "_full_text": "'62095':6 'cape':2 'eastern':1 'ec145':7 'local':5 'sisulu':4 'walter':3", "amount_rand_thousand": "62095", "sphere": "local", "municipality_type": "local", "_id": 37, "geo_name": "Walter Sisulu"}, {"geo_code": "DC14", "parent_name": "Eastern Cape", "_full_text": "'293252':5 'cape':4 'dc14':1 'district':2,8 'eastern':3 'gqabi':7 'joe':6 'local':10 'municipality':9", "amount_rand_thousand": "293252", "sphere": "local", "municipality_type": "district", "_id": 38, "geo_name": "Joe Gqabi District Municipality"}, {"geo_code": "EC153", "parent_name": "Eastern Cape", "_full_text": "'273573':5 'cape':3 'eastern':2 'ec153':1 'hill':7 'local':4 'ngquza':6", "amount_rand_thousand": "273573", "sphere": "local", "municipality_type": "local", "_id": 39, "geo_name": "Ngquza Hill"}, {"geo_code": "EC154", "parent_name": "Eastern Cape", "_full_text": "'162406':3 'cape':2 'eastern':1 'ec154':8 'johns':7 'local':4 'port':5 'st':6", "amount_rand_thousand": "162406", "sphere": "local", "municipality_type": "local", "_id": 40, "geo_name": "Port St Johns"}, {"geo_code": "EC155", "parent_name": "Eastern Cape", "_full_text": "'277708':5 'cape':3 'eastern':2 'ec155':6 'local':4 'nyandeni':1", "amount_rand_thousand": "277708", "sphere": "local", "municipality_type": "local", "_id": 41, "geo_name": "Nyandeni"}, {"geo_code": "EC156", "parent_name": "Eastern Cape", "_full_text": "'194734':3 'cape':2 'eastern':1 'ec156':5 'local':4 'mhlontlo':6", "amount_rand_thousand": "194734", "sphere": "local", "municipality_type": "local", "_id": 42, "geo_name": "Mhlontlo"}, {"geo_code": "EC157", "parent_name": "Eastern Cape", "_full_text": "'352763':5 'cape':2 'dalindyebo':8 'eastern':1 'ec157':3 'king':6 'local':4 'sabata':7", "amount_rand_thousand": "352763", "sphere": "local", "municipality_type": "local", "_id": 43, "geo_name": "King Sabata Dalindyebo"}, {"geo_code": "DC15", "parent_name": "Eastern Cape", "_full_text": "'918991':3 'cape':5 'dc15':1 'district':2,8 'eastern':4 'local':10 'municipality':9 'o.r':6 'tambo':7", "amount_rand_thousand": "918991", "sphere": "local", "municipality_type": "district", "_id": 44, "geo_name": "O.R. Tambo District Municipality"}, {"geo_code": "EC441", "parent_name": "Eastern Cape", "_full_text": "'249823':4 'cape':3 'eastern':2 'ec441':1 'local':5 'matatiele':6", "amount_rand_thousand": "249823", "sphere": "local", "municipality_type": "local", "_id": 45, "geo_name": "Matatiele"}, {"geo_code": "EC442", "parent_name": "Eastern Cape", "_full_text": "'230629':6 'cape':2 'eastern':1 'ec442':3 'local':4 'umzimvubu':5", "amount_rand_thousand": "230629", "sphere": "local", "municipality_type": "local", "_id": 46, "geo_name": "Umzimvubu"}, {"geo_code": "EC443", "parent_name": "Eastern Cape", "_full_text": "'278139':5 'cape':2 'eastern':1 'ec443':3 'local':4 'mbizana':6", "amount_rand_thousand": "278139", "sphere": "local", "municipality_type": "local", "_id": 47, "geo_name": "Mbizana"}, {"geo_code": "EC444", "parent_name": "Eastern Cape", "_full_text": "'129512':1 'cape':3 'eastern':2 'ec444':5 'local':4 'ntabankulu':6", "amount_rand_thousand": "129512", "sphere": "local", "municipality_type": "local", "_id": 48, "geo_name": "Ntabankulu"}, {"geo_code": "DC44", "parent_name": "Eastern Cape", "_full_text": "'598038':4 'alfred':7 'cape':3 'dc44':5 'district':1,9 'eastern':2 'local':6 'municipality':10 'nzo':8", "amount_rand_thousand": "598038", "sphere": "local", "municipality_type": "district", "_id": 49, "geo_name": "Alfred Nzo District Municipality"}, {"geo_code": "CPT", "parent_name": "Western Cape", "_full_text": "'3081195':1 'cape':5,8 'city':6 'cpt':10 'local':3 'metro':2 'of':7 'town':9 'western':4", "amount_rand_thousand": "3081195", "sphere": "local", "municipality_type": "metro", "_id": 238, "geo_name": "City of Cape Town"}, {"geo_code": "WC011", "parent_name": "Western Cape", "_full_text": "'60792':6 'cape':4 'local':5 'matzikama':2 'wc011':1 'western':3", "amount_rand_thousand": "60792", "sphere": "local", "municipality_type": "local", "_id": 239, "geo_name": "Matzikama"}, {"geo_code": "WC012", "parent_name": "Western Cape", "_full_text": "'53069':6 'cape':3 'cederberg':5 'local':4 'wc012':1 'western':2", "amount_rand_thousand": "53069", "sphere": "local", "municipality_type": "local", "_id": 240, "geo_name": "Cederberg"}, {"geo_code": "WC013", "parent_name": "Western Cape", "_full_text": "'48940':1 'bergrivier':5 'cape':3 'local':4 'wc013':6 'western':2", "amount_rand_thousand": "48940", "sphere": "local", "municipality_type": "local", "_id": 241, "geo_name": "Bergrivier"}, {"geo_code": "WC014", "parent_name": "Western Cape", "_full_text": "'96832':7 'bay':3 'cape':5 'local':6 'saldanha':2 'wc014':1 'western':4", "amount_rand_thousand": "96832", "sphere": "local", "municipality_type": "local", "_id": 242, "geo_name": "Saldanha Bay"}, {"geo_code": "WC015", "parent_name": "Western Cape", "_full_text": "'102195':1 'cape':3 'local':4 'swartland':6 'wc015':5 'western':2", "amount_rand_thousand": "102195", "sphere": "local", "municipality_type": "local", "_id": 243, "geo_name": "Swartland"}, {"geo_code": "DC1", "parent_name": "Western Cape", "_full_text": "'96113':10 'cape':3 'coast':5 'dc1':8 'district':1,6 'local':9 'municipality':7 'west':4 'western':2", "amount_rand_thousand": "96113", "sphere": "local", "municipality_type": "district", "_id": 244, "geo_name": "West Coast District Municipality"}, {"geo_code": "WC022", "parent_name": "Western Cape", "_full_text": "'101915':4 'cape':2 'local':3 'wc022':5 'western':1 'witzenberg':6", "amount_rand_thousand": "101915", "sphere": "local", "municipality_type": "local", "_id": 245, "geo_name": "Witzenberg"}, {"geo_code": "WC023", "parent_name": "Western Cape", "_full_text": "'164466':6 'cape':4 'drakenstein':1 'local':5 'wc023':2 'western':3", "amount_rand_thousand": "164466", "sphere": "local", "municipality_type": "local", "_id": 246, "geo_name": "Drakenstein"}, {"geo_code": "WC024", "parent_name": "Western Cape", "_full_text": "'149804':6 'cape':3 'local':4 'stellenbosch':1 'wc024':5 'western':2", "amount_rand_thousand": "149804", "sphere": "local", "municipality_type": "local", "_id": 247, "geo_name": "Stellenbosch"}, {"geo_code": "WC025", "parent_name": "Western Cape", "_full_text": "'127591':7 'breede':5 'cape':3 'local':4 'valley':6 'wc025':1 'western':2", "amount_rand_thousand": "127591", "sphere": "local", "municipality_type": "local", "_id": 248, "geo_name": "Breede Valley"}, {"geo_code": "WC026", "parent_name": "Western Cape", "_full_text": "'85039':4 'cape':2 'langeberg':5 'local':3 'wc026':6 'western':1", "amount_rand_thousand": "85039", "sphere": "local", "municipality_type": "local", "_id": 249, "geo_name": "Langeberg"}, {"geo_code": "DC2", "parent_name": "Western Cape", "_full_text": "'238441':1 'cape':2,9 'dc2':10 'district':4,6 'local':7 'municipality':5 'western':8 'winelands':3", "amount_rand_thousand": "238441", "sphere": "local", "municipality_type": "district", "_id": 250, "geo_name": "Cape Winelands District Municipality"}, {"geo_code": "WC031", "parent_name": "Western Cape", "_full_text": "'103419':6 'cape':4 'local':5 'theewaterskloof':2 'wc031':1 'western':3", "amount_rand_thousand": "103419", "sphere": "local", "municipality_type": "local", "_id": 251, "geo_name": "Theewaterskloof"}, {"geo_code": "WC032", "parent_name": "Western Cape", "_full_text": "'117318':6 'cape':4 'local':5 'overstrand':2 'wc032':1 'western':3", "amount_rand_thousand": "117318", "sphere": "local", "municipality_type": "local", "_id": 252, "geo_name": "Overstrand"}, {"geo_code": "WC033", "parent_name": "Western Cape", "_full_text": "'32155':5 'agulhas':7 'cape':3,6 'local':4 'wc033':1 'western':2", "amount_rand_thousand": "32155", "sphere": "local", "municipality_type": "local", "_id": 253, "geo_name": "Cape Agulhas"}, {"geo_code": "WC034", "parent_name": "Western Cape", "_full_text": "'34118':1 'cape':3 'local':4 'swellendam':5 'wc034':6 'western':2", "amount_rand_thousand": "34118", "sphere": "local", "municipality_type": "local", "_id": 254, "geo_name": "Swellendam"}, {"geo_code": "DC3", "parent_name": "Western Cape", "_full_text": "'74636':2 'cape':5 'dc3':9 'district':1,7 'local':3 'municipality':8 'overberg':6 'western':4", "amount_rand_thousand": "74636", "sphere": "local", "municipality_type": "district", "_id": 255, "geo_name": "Overberg District Municipality"}, {"geo_code": "WC041", "parent_name": "Western Cape", "_full_text": "'29803':5 'cape':3 'kannaland':6 'local':4 'wc041':1 'western':2", "amount_rand_thousand": "29803", "sphere": "local", "municipality_type": "local", "_id": 256, "geo_name": "Kannaland"}, {"geo_code": "WC042", "parent_name": "Western Cape", "_full_text": "'47294':2 'cape':4 'hessequa':6 'local':5 'wc042':1 'western':3", "amount_rand_thousand": "47294", "sphere": "local", "municipality_type": "local", "_id": 257, "geo_name": "Hessequa"}, {"geo_code": "WC043", "parent_name": "Western Cape", "_full_text": "'101192':2 'bay':7 'cape':4 'local':5 'mossel':6 'wc043':1 'western':3", "amount_rand_thousand": "101192", "sphere": "local", "municipality_type": "local", "_id": 258, "geo_name": "Mossel Bay"}, {"geo_code": "WC044", "parent_name": "Western Cape", "_full_text": "'163760':1 'cape':3 'george':5 'local':4 'wc044':6 'western':2", "amount_rand_thousand": "163760", "sphere": "local", "municipality_type": "local", "_id": 259, "geo_name": "George"}, {"geo_code": "WC045", "parent_name": "Western Cape", "_full_text": "'78568':6 'cape':2 'local':3 'oudtshoorn':4 'wc045':5 'western':1", "amount_rand_thousand": "78568", "sphere": "local", "municipality_type": "local", "_id": 260, "geo_name": "Oudtshoorn"}, {"geo_code": "WC047", "parent_name": "Western Cape", "_full_text": "'104346':1 'bitou':6 'cape':4 'local':5 'wc047':2 'western':3", "amount_rand_thousand": "104346", "sphere": "local", "municipality_type": "local", "_id": 261, "geo_name": "Bitou"}, {"geo_code": "WC048", "parent_name": "Western Cape", "_full_text": "'94039':1 'cape':4 'knysna':6 'local':5 'wc048':2 'western':3", "amount_rand_thousand": "94039", "sphere": "local", "municipality_type": "local", "_id": 262, "geo_name": "Knysna"}, {"geo_code": "DC4", "parent_name": "Western Cape", "_full_text": "'162480':5 'cape':8 'dc4':9 'district':3,6 'garden':1 'local':10 'municipality':4 'route':2 'western':7", "amount_rand_thousand": "162480", "sphere": "local", "municipality_type": "district", "_id": 263, "geo_name": "Garden Route District Municipality"}, {"geo_code": "WC051", "parent_name": "Western Cape", "_full_text": "'17704':1 'cape':3 'laingsburg':6 'local':4 'wc051':5 'western':2", "amount_rand_thousand": "17704", "sphere": "local", "municipality_type": "local", "_id": 264, "geo_name": "Laingsburg"}, {"geo_code": "WC052", "parent_name": "Western Cape", "_full_text": "'22985':6 'albert':2 'cape':4 'local':5 'prince':1 'wc052':7 'western':3", "amount_rand_thousand": "22985", "sphere": "local", "municipality_type": "local", "_id": 265, "geo_name": "Prince Albert"}, {"geo_code": "WC053", "parent_name": "Western Cape", "_full_text": "'67109':6 'beaufort':1 'cape':4 'local':5 'wc053':7 'west':2 'western':3", "amount_rand_thousand": "67109", "sphere": "local", "municipality_type": "local", "_id": 266, "geo_name": "Beaufort West"}, {"geo_code": "DC5", "parent_name": "Western Cape", "_full_text": "'31965':4 'cape':3 'central':5 'dc5':9 'district':1,7 'karoo':6 'local':10 'municipality':8 'western':2", "amount_rand_thousand": "31965", "sphere": "local", "municipality_type": "district", "_id": 267, "geo_name": "Central Karoo District Municipality"}];

         const typeLabels = {
           "local": "Local municiaplities",
           "metro": "Metropolitan municipalities",
           "district": "District Municipalities",
         };
         var chartData = data.map(item => (
           {
             "Name": item.geo_name,
             "Amount": item.amount_rand_thousand = parseFloat(item.amount_rand_thousand)*1000,
             "Province": item.parent_name,
             "URL": `https://municipalmoney.gov.za/profiles/municipality-${item.geo_code}`,
             "Code": item.code,
             "Group": typeLabels[item.municipality_type]
           }
         ));

    var chart =  new HorizontalBarChart()
        .select('chart')
        .data(chartData)
        .nameKey('Name')
        .valueKey('Amount')
        .filterKey('Province')
        .groupKey('Group')
        .urlKey('URL')
        .xAxisUnit('B')
        .barUnit('M')
        .filterLabel('Select a province:')
        .fontFace(`'Courier New', Courier, monospace`)
        .colors(['green', 'green'])
        .width(300)
  // })
  // .fail(function(jqXHR, textStatus, errorThrown) {
  //   console.log(jqXHR, textStatus, errorThrown);
  //   alert("Error. See console.")
  // });
       </script>
    </body>
</html>
